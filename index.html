

    
  
  <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quiz — Polished (Syam Prasad)</title>
<link href="https://fonts.googleapis.com/css?family=Orbitron:700&display=swap" rel="stylesheet">
<style>
:root{
  --bg1:#291c6e;
  --bg2:#00167d;
  --panel:#12132a;
  --accent:#2debb0;
}
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  background: radial-gradient(circle at 10% 10%, #06104a 0%, var(--bg1) 25%, var(--bg2) 70%);
  font-family: "Orbitron", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color:#dfe;
  padding:28px 12px;
}
.container{
  width:820px;
  max-width:96%;
  border-radius:18px;
  overflow:hidden;
  background: linear-gradient(180deg, rgba(255,255,255,0.02) 0%, rgba(0,0,0,0.25) 100%);
  box-shadow: 0 10px 40px rgba(0,0,0,0.45);
  border: 1px solid rgba(255,255,255,0.03);
}
.header{
  background: linear-gradient(90deg,#9b36ff 20%, #53f0d6 100%);
  padding:20px 18px;
  text-align:center;
  color:#fff;
  font-size:26px;
  font-weight:700;
  letter-spacing:1px;
}
.controls{
  display:flex;
  gap:12px;
  justify-content:center;
  align-items:center;
  padding:12px;
  background: linear-gradient(180deg, rgba(0,0,0,0.12), rgba(0,0,0,0.06));
  flex-wrap:wrap;
}
.control-item{ display:flex; align-items:center; gap:8px; }
.select, .small-btn, .num-input{
  background: rgba(255,255,255,0.02);
  border: 1px solid rgba(255,255,255,0.06);
  color: #dff;
  padding:7px 10px;
  border-radius:8px;
  font-weight:700;
}
.small-btn{
  background: linear-gradient(90deg,#4ef1c7,#3abf8b);
  border:none;
  cursor:pointer;
  padding:9px 14px;
}
.num-input{ width:84px; padding:8px; color:#000; background:#fff; border-radius:8px; font-weight:700; }
.panel{ padding:16px; position:relative; background: linear-gradient(180deg, rgba(5,8,30,0.6), var(--panel)); }
.top-row{ display:flex; justify-content:space-between; align-items:flex-start; gap:12px; }
.qbox{ background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:14px; padding:18px; margin-top:12px; box-shadow: 0 10px 30px rgba(0,0,0,0.35); border-left:6px solid var(--accent, rgba(45,235,176,0.12)); }
.question { font-size:20px; color:#e6fff7; margin-bottom:14px; }

.options { display:flex; flex-direction:column; gap:12px; }
.answer-btn{ display:flex; align-items:center; justify-content:center; padding:14px 18px; border-radius:12px; background: linear-gradient(90deg,#2f00c8,#4b2bff); color:#fff; font-size:18px; font-weight:800; border: 2px solid rgba(255,255,255,0.06); cursor:pointer; transition: transform 140ms, box-shadow 160ms, background 160ms; box-shadow: 0 6px 24px rgba(30,20,60,0.35); user-select:none; text-align:center; }
.answer-btn:hover{ transform: translateY(-3px); }
.answer-btn:active{ transform: translateY(-1px); }
.answer-btn[disabled]{ opacity:0.9; cursor:default; transform:none; }

@keyframes flashCorrect { 0%{transform:scale(1)} 40%{transform:scale(1.02)} 100%{transform:none} }
@keyframes flashWrong { 0%{transform:scale(1)} 40%{transform:scale(1.02)} 100%{transform:none} }
.answer-btn.correct { background: #FFD700; border-color:#FFD700; color:#000; animation: flashCorrect 420ms ease; box-shadow:0 8px 28px rgba(255,215,0,0.16); }
.answer-btn.incorrect { background: #B22222; border-color:#8B0000; color:#fff; animation: flashWrong 420ms ease; box-shadow:0 8px 28px rgba(178,34,34,0.12); }

.progress-bar{ height:8px; background: rgba(255,255,255,0.03); border-radius:8px; margin:18px 0; overflow:hidden; }
.progress{ height:100%; width:0%; background: linear-gradient(90deg,#3a1bff,#5ec0ff); transition:width 200ms; }
.counter{ text-align:center; color: #9fffe7; font-weight:700; padding:6px; margin-top:6px; }

/* Timer styles */
.time-left { font-weight: 700; margin-top: 8px; }
.time-left-label { color: #FFB400; /* deep yellow */ }
#timer { color: #B22222 !important; font-weight:900; font-size:20px; } /* deep red */
#activityTimer { color: #ffffff !important; font-weight:800; font-size:13px; margin-top:6px; letter-spacing:1px; } /* deep white */

.footer{ padding:20px; height:56px; }

@media (max-width:760px){
  .top-row{ flex-direction:column; }
  .answer-btn{ font-size:16px; padding:12px; }
  .container{ padding-bottom:20px; }
}
</style>
</head>
<body>
<div class="container" role="application" aria-label="Quiz app">
  <div class="header">QUIZ (శ్యాం ప్రసాద్)</div>

  <div class="controls" role="region" aria-label="Quiz controls">
    <div class="control-item" title="Number of choices per question">
      <label style="font-weight:700">Choices:</label>
      <select id="choiceSelect" class="select" aria-label="Choices"></select>
      <input id="choiceCustom" class="num-input" type="number" placeholder="Custom" style="display:none;" min="1" />
    </div>

    <div class="control-item" title="Number of questions">
      <label style="font-weight:700">Questions:</label>
      <select id="countSelect" class="select" aria-label="Questions count"></select>
      <input id="countCustom" class="num-input" type="number" placeholder="Custom" style="display:none;" min="1" />
    </div>

    <div class="control-item" title="Countdown seconds">
      <label style="font-weight:700">Time (s):</label>
      <select id="timeSelect" class="select" aria-label="Time seconds"></select>
      <input id="timeCustom" class="num-input" type="number" placeholder="Seconds" style="display:none;" min="0" />
    </div>

    <div class="control-item" title="Enable or disable countdown">
      <label style="font-weight:700"><input id="timerEnable" type="checkbox" style="transform:scale(1.1); margin-right:8px;" /> Enable Timer</label>
    </div>

    <div class="control-item" title="Enable mistake limit">
      <label style="font-weight:700"><input id="mistakeEnable" type="checkbox" style="transform:scale(1.1); margin-right:8px;" /> Limit Mistakes</label>
      <select id="mistakeSelect" class="select" style="margin-left:6px;"></select>
      <input id="mistakeCustom" class="num-input" type="number" placeholder="Custom" style="display:none; margin-left:6px;" min="0" />
    </div>

    <div class="control-item">
      <label style="font-weight:700">Theme:</label>
      <select id="themeSelect" class="select" aria-label="Theme"></select>
    </div>

    <div class="control-item">
      <button id="startBtn" class="small-btn" aria-label="Start quiz">Start / Restart</button>
    </div>
  </div>

  <div class="panel">
    <div class="top-row">
      <div style="width:68%">
        <div class="qbox" id="qbox" aria-live="polite">
          <div id="quiz">Press Start to begin</div>
        </div>
      </div>

      <div style="width:30%; padding-left:12px; text-align:right;">
        <div class="time-left"><span class="time-left-label">Time Left:</span> <span id="timer">--:--</span></div>
        <div id="activityTimer" aria-label="Elapsed time">00:00</div>
        <div style="height:8px"></div>
        <div class="progress-bar"><div id="progress" class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div>
        <div class="counter" id="counter">Question 0 of 0</div>
        <div class="counter" id="mistakesLeft" style="margin-top:10px; color:#ffb3b3; display:none;">Mistakes left: --</div>
      </div>
    </div>
    <div class="footer"></div>
  </div>
</div>

<script>
/* =========================
   Polished Quiz JS
   - redundant activity timer starts removed
   - clearer comments and small accessibility tweaks
   ========================= */

/* --- dataset (same as original, truncated here for brevity) --- */
const questions = [

    
 {
    "question": "Eat",
    "options": ["खाना", "पीना", "सोना", "जाना"],
    "answer": "खाना"
  },
  {
    "question": "Drink",
    "options": ["पीना", "बोलना", "पढ़ना", "देखना"],
    "answer": "पीना"
  },
  {
    "question": "Sleep",
    "options": ["सोना", "चलना", "दौड़ना", "बैठना"],
    "answer": "सोना"
  },
  {
    "question": "Go",
    "options": ["जाना", "आना", "बोलना", "सुनना"],
    "answer": "जाना"
  },
  {
    "question": "Come",
    "options": ["आना", "खाना", "लिखना", "देखना"],
    "answer": "आना"
  },
  {
    "question": "Speak",
    "options": ["बोलना", "पढ़ना", "सुनना", "चलना"],
    "answer": "बोलना"
  },
  {
    "question": "Read",
    "options": ["पढ़ना", "लिखना", "देखना", "सुनना"],
    "answer": "पढ़ना"
  },
  {
    "question": "Write",
    "options": ["लिखना", "खाना", "पीना", "जाना"],
    "answer": "लिखना"
  },
  {
    "question": "See",
    "options": ["देखना", "सुनना", "चलना", "दौड़ना"],
    "answer": "देखना"
  },
  {
    "question": "Hear",
    "options": ["सुनना", "बोलना", "पढ़ना", "लिखना"],
    "answer": "सुनना"
  },
  {
    "question": "Walk",
    "options": ["चलना", "दौड़ना", "बैठना", "सोना"],
    "answer": "चलना"
  },
  {
    "question": "Run",
    "options": ["दौड़ना", "चलना", "बैठना", "जाना"],
    "answer": "दौड़ना"
  },
  {
    "question": "Sit",
    "options": ["बैठना", "सोना", "खाना", "पीना"],
    "answer": "बैठना"
  },
  {
    "question": "Save",
    "options": ["बचाना", "देना", "लेना", "खोलना"],
    "answer": "बचाना"
  },
  {
    "question": "Learn",
    "options": ["सीखना", "खेलना", "मदद करना", "देना"],
    "answer": "सीखना"
  },
  {
    "question": "Play",
    "options": ["खेलना", "सीखना", "बचाना", "लेना"],
    "answer": "खेलना"
  },
  {
    "question": "Help",
    "options": ["मदद करना", "खोलना", "बंद करना", "खरीदना"],
    "answer": "मदद करना"
  },
  {
    "question": "Give",
    "options": ["देना", "लेना", "खाना", "पीना"],
    "answer": "देना"
  },
  {
    "question": "Take",
    "options": ["लेना", "देना", "सोना", "जाना"],
    "answer": "लेना"
  },
  {
    "question": "Open",
    "options": ["खोलना", "बंद करना", "खरीदना", "बेचना"],
    "answer": "खोलना"
  },
  {
    "question": "Close",
    "options": ["बंद करना", "खोलना", "साफ करना", "धोना"],
    "answer": "बंद करना"
  },
  {
    "question": "Buy",
    "options": ["खरीदना", "बेचना", "साफ करना", "मदद करना"],
    "answer": "खरीदना"
  },
  {
    "question": "Sell",
    "options": ["बेचना", "खरीदना", "खोलना", "बंद करना"],
    "answer": "बेचना"
  },
  {
    "question": "Clean",
    "options": ["साफ करना", "धोना", "गाना", "रोना"],
    "answer": "साफ करना"
  },
  {
    "question": "Wash",
    "options": ["धोना", "साफ करना", "खेलना", "सीखना"],
    "answer": "धोना"
  },
  {
    "question": "Sing",
    "options": ["गाना", "रोना", "हँसना", "मुस्कुराना"],
    "answer": "गाना"
  },
  {
    "question": "Cry",
    "options": ["रोना", "गाना", "हँसना", "सोचना"],
    "answer": "रोना"
  },
  {
    "question": "Laugh",
    "options": ["हँसना", "मुस्कुराना", "रोना", "गाना"],
    "answer": "हँसना"
  },
  {
    "question": "Smile",
    "options": ["मुस्कुराना", "हँसना", "रोना", "सोचना"],
    "answer": "मुस्कुराना"
  },
  {
    "question": "Think",
    "options": ["सोचना", "भूलना", "शुरू करना", "रोकना"],
    "answer": "सोचना"
  },
  {
    "question": "Forget",
    "options": ["भूलना", "सोचना", "पकड़ना", "फेंकना"],
    "answer": "भूलना"
  },
  {
    "question": "Start",
    "options": ["शुरू करना", "रोकना", "छिपाना", "ढूंढना"],
    "answer": "शुरू करना"
  },
  {
    "question": "Stop",
    "options": ["रोकना", "शुरू करना", "पकड़ना", "फेंकना"],
    "answer": "रोकना"
  },
  {
    "question": "Catch",
    "options": ["पकड़ना", "फेंकना", "छिपाना", "ढूंढना"],
    "answer": "पकड़ना"
  },
  {
    "question": "Throw",
    "options": ["फेंकना", "पकड़ना", "उपयोग करना", "जीतना"],
    "answer": "फेंकना"
  },
  {
    "question": "Hide",
    "options": ["छिपाना", "ढूंढना", "रोकना", "शुरू करना"],
    "answer": "छिपाना"
  },
  {
    "question": "Find",
    "options": ["ढूंढना", "छिपाना", "पकड़ना", "फेंकना"],
    "answer": "ढूंढना"
  },
  {
    "question": "Use",
    "options": ["उपयोग करना", "जीतना", "हारना", "खेलना"],
    "answer": "उपयोग करना"
  },
  {
    "question": "Win",
    "options": ["जीतना", "हारना", "उपयोग करना", "खेलना"],
    "answer": "जीतना"
  },
  {
    "question": "Lose",
    "options": ["हारना", "जीतना", "खेलना", "सीखना"],
    "answer": "हारना"
  },
  {
    "question": "खाना",
    "options": ["Eat", "Drink", "Sleep", "Go"],
    "answer": "Eat"
  },
  {
    "question": "पीना",
    "options": ["Drink", "Speak", "Read", "See"],
    "answer": "Drink"
  },
  {
    "question": "सोना",
    "options": ["Sleep", "Walk", "Run", "Sit"],
    "answer": "Sleep"
  },
  {
    "question": "जाना",
    "options": ["Go", "Come", "Speak", "Hear"],
    "answer": "Go"
  },
  {
    "question": "आना",
    "options": ["Come", "Eat", "Write", "See"],
    "answer": "Come"
  },
  {
    "question": "बोलना",
    "options": ["Speak", "Read", "Hear", "Walk"],
    "answer": "Speak"
  },
  {
    "question": "पढ़ना",
    "options": ["Read", "Write", "See", "Hear"],
    "answer": "Read"
  },
  {
    "question": "लिखना",
    "options": ["Write", "Eat", "Drink", "Go"],
    "answer": "Write"
  },
  {
    "question": "देखना",
    "options": ["See", "Hear", "Walk", "Run"],
    "answer": "See"
  },
  {
    "question": "सुनना",
    "options": ["Hear", "Speak", "Read", "Write"],
    "answer": "Hear"
  },
  {
    "question": "चलना",
    "options": ["Walk", "Run", "Sit", "Sleep"],
    "answer": "Walk"
  },
  {
    "question": "दौड़ना",
    "options": ["Run", "Walk", "Sit", "Go"],
    "answer": "Run"
  },
  {
    "question": "बैठना",
    "options": ["Sit", "Sleep", "Eat", "Drink"],
    "answer": "Sit"
  },
  {
    "question": "बचाना",
    "options": ["Save", "Give", "Take", "Open"],
    "answer": "Save"
  },
  {
    "question": "सीखना",
    "options": ["Learn", "Play", "Help", "Give"],
    "answer": "Learn"
  },
  {
    "question": "खेलना",
    "options": ["Play", "Learn", "Save", "Take"],
    "answer": "Play"
  },
  {
    "question": "मदद करना",
    "options": ["Help", "Open", "Close", "Buy"],
    "answer": "Help"
  },
  {
    "question": "देना",
    "options": ["Give", "Take", "Eat", "Drink"],
    "answer": "Give"
  },
  {
    "question": "लेना",
    "options": ["Take", "Give", "Sleep", "Go"],
    "answer": "Take"
  },
  {
    "question": "खोलना",
    "options": ["Open", "Close", "Buy", "Sell"],
    "answer": "Open"
  },
  {
    "question": "बंद करना",
    "options": ["Close", "Open", "Clean", "Wash"],
    "answer": "Close"
  },
  {
    "question": "खरीदना",
    "options": ["Buy", "Sell", "Clean", "Help"],
    "answer": "Buy"
  },
  {
    "question": "बेचना",
    "options": ["Sell", "Buy", "Open", "Close"],
    "answer": "Sell"
  },
  {
    "question": "साफ करना",
    "options": ["Clean", "Wash", "Sing", "Cry"],
    "answer": "Clean"
  },
  {
    "question": "धोना",
    "options": ["Wash", "Clean", "Play", "Learn"],
    "answer": "Wash"
  },
  {
    "question": "गाना",
    "options": ["Sing", "Cry", "Laugh", "Smile"],
    "answer": "Sing"
  },
  {
    "question": "रोना",
    "options": ["Cry", "Sing", "Laugh", "Think"],
    "answer": "Cry"
  },
  {
    "question": "हँसना",
    "options": ["Laugh", "Smile", "Cry", "Sing"],
    "answer": "Laugh"
  },
  {
    "question": "मुस्कुराना",
    "options": ["Smile", "Laugh", "Cry", "Think"],
    "answer": "Smile"
  },
  {
    "question": "सोचना",
    "options": ["Think", "Forget", "Start", "Stop"],
    "answer": "Think"
  },
  {
    "question": "भूलना",
    "options": ["Forget", "Think", "Catch", "Throw"],
    "answer": "Forget"
  },
  {
    "question": "शुरू करना",
    "options": ["Start", "Stop", "Hide", "Find"],
    "answer": "Start"
  },
  {
    "question": "रोकना",
    "options": ["Stop", "Start", "Catch", "Throw"],
    "answer": "Stop"
  },
  {
    "question": "पकड़ना",
    "options": ["Catch", "Throw", "Hide", "Find"],
    "answer": "Catch"
  },
  {
    "question": "फेंकना",
    "options": ["Throw", "Catch", "Use", "Win"],
    "answer": "Throw"
  },
  {
    "question": "छिपाना",
    "options": ["Hide", "Find", "Stop", "Start"],
    "answer": "Hide"
  },
  {
    "question": "ढूंढना",
    "options": ["Find", "Hide", "Catch", "Throw"],
    "answer": "Find"
  },
  {
    "question": "उपयोग करना",
    "options": ["Use", "Win", "Lose", "Play"],
    "answer": "Use"
  },
  {
    "question": "जीतना",
    "options": ["Win", "Lose", "Use", "Play"],
    "answer": "Win"
  },
  {
    "question": "हारना",
    "options": ["Lose", "Win", "Play", "Learn"],
    "answer": "Lose"
  },
  
  
  {
    "question": "खाना",
    "options": ["తినడం", "త్రాగడం", "నిద్రపోవడం", "వెళ్ళడం"],
    "answer": "తినడం"
  },
  {
    "question": "पीना",
    "options": ["తినడం", "త్రాగడం", "మాట్లాడటం", "చదవడం"],
    "answer": "త్రాగడం"
  },
  {
    "question": "सोना",
    "options": ["నిద్రపోవడం", "వెళ్ళడం", "రావడం", "చూడటం"],
    "answer": "నిద్రపోవడం"
  },
  {
    "question": "जाना",
    "options": ["వెళ్ళడం", "రావడం", "నడవడం", "పరిగెత్తడం"],
    "answer": "వెళ్ళడం"
  },
  {
    "question": "आना",
    "options": ["రావడం", "వెళ్ళడం", "మాట్లాడటం", "చదవడం"],
    "answer": "రావడం"
  },
  {
    "question": "बोलना",
    "options": ["మాట్లాడటం", "చూడటం", "వినడం", "నడవడం"],
    "answer": "మాట్లాడటం"
  },
  {
    "question": "पढ़ना",
    "options": ["చదవడం", "రాయడం", "చూడటం", "వినడం"],
    "answer": "చదవడం"
  },
  {
    "question": "लिखना",
    "options": ["రాయడం", "చదవడం", "పాడటం", "నవ్వడం"],
    "answer": "రాయడం"
  },
  {
    "question": "देखना",
    "options": ["చూడటం", "వినడం", "నడవడం", "కూర్చోవడం"],
    "answer": "చూడటం"
  },
  {
    "question": "सुनना",
    "options": ["వినడం", "చూడటం", "మాట్లాడటం", "నవ్వడం"],
    "answer": "వినడం"
  },
  {
    "question": "चलना",
    "options": ["నడవడం", "పరిగెత్తడం", "కూర్చోవడం", "వెళ్ళడం"],
    "answer": "నడవడం"
  },
  {
    "question": "दौड़ना",
    "options": ["పరిగెత్తడం", "నడవడం", "కూర్చోవడం", "రావడం"],
    "answer": "పరిగెత్తడం"
  },
  {
    "question": "बैठना",
    "options": ["కూర్చోవడం", "నడవడం", "పరిగెత్తడం", "చూడటం"],
    "answer": "కూర్చోవడం"
  },
  {
    "question": "बचाना",
    "options": ["కాపాడటం", "సహాయం చేయడం", "ఇవ్వడం", "తీసుకోవడం"],
    "answer": "కాపాడటం"
  },
  {
    "question": "सीखना",
    "options": ["నేర్చుకోవడం", "ఆడటం", "సహాయం చేయడం", "చదవడం"],
    "answer": "నేర్చుకోవడం"
  },
  {
    "question": "खेलना",
    "options": ["ఆడటం", "నేర్చుకోవడం", "పాడటం", "నవ్వడం"],
    "answer": "ఆడటం"
  },
  {
    "question": "मदद करना",
    "options": ["సహాయం చేయడం", "కాపాడటం", "ఇవ్వడం", "తీసుకోవడం"],
    "answer": "సహాయం చేయడం"
  },
  {
    "question": "देना",
    "options": ["ఇవ్వడం", "తీసుకోవడం", "కొనడం", "అమ్మడం"],
    "answer": "ఇవ్వడం"
  },
  {
    "question": "लेना",
    "options": ["తీసుకోవడం", "ఇవ్వడం", "కొనడం", "శుభ్రం చేయడం"],
    "answer": "తీసుకోవడం"
  },
  {
    "question": "खोलना",
    "options": ["తెరవడం", "మూసివేయడం", "కొనడం", "అమ్మడం"],
    "answer": "తెరవడం"
  },
  {
    "question": "बंद करना",
    "options": ["మూసివేయడం", "తెరవడం", "శుభ్రం చేయడం", "కడగడం"],
    "answer": "మూసివేయడం"
  },
  {
    "question": "खरीदना",
    "options": ["కొనడం", "అమ్మడం", "ఇవ్వడం", "తీసుకోవడం"],
    "answer": "కొనడం"
  },
  {
    "question": "बेचना",
    "options": ["అమ్మడం", "కొనడం", "తెరవడం", "మూసివేయడం"],
    "answer": "అమ్మడం"
  },
  {
    "question": "साफ करना",
    "options": ["శుభ్రం చేయడం", "కడగడం", "పాడటం", "నవ్వడం"],
    "answer": "శుభ్రం చేయడం"
  },
  {
    "question": "धोना",
    "options": ["ఉతకడం", "శుభ్రం చేయడం", "పాడటం", "ఏడవడం"],
    "answer": "ఉతకడం"
  },
  {
    "question": "गाना",
    "options": ["పాడటం", "నవ్వడం", "ఏడవడం", "ఆలోచించడం"],
    "answer": "పాడటం"
  },
  {
    "question": "रोना",
    "options": ["ఏడవడం", "నవ్వడం", "పాడటం", "మాట్లాడటం"],
    "answer": "ఏడవడం"
  },
  {
    "question": "हँसना",
    "options": ["నవ్వడం", "ఏడవడం", "పాడటం", "పడిపోవడం"],
    "answer": "నవ్వడం"
  },
  {
    "question": "मुस्कुराना",
    "options": ["చిరునవ్వు నవ్వడం", "నవ్వడం", "ఏడవడం", "పాడటం"],
    "answer": "చిరునవ్వు నవ్వడం"
  },
  {
    "question": "सोचना",
    "options": ["ఆలోచించడం", "మర్చిపోవడం", "ప్రారంభించడం", "ఆపడం"],
    "answer": "ఆలోచించడం"
  },
  {
    "question": "भूलना",
    "options": ["మర్చిపోవడం", "ఆలోచించడం", "ప్రారంభించడం", "వెతకడం"],
    "answer": "మర్చిపోవడం"
  },
  {
    "question": "शुरू करना",
    "options": ["ప్రారంభించడం", "ఆపడం", "పట్టుకోవడం", "విసిరేయడం"],
    "answer": "ప్రారంభించడం"
  },
  {
    "question": "रोकना",
    "options": ["ఆపడం", "ప్రారంభించడం", "వెతకడం", "దాచడం"],
    "answer": "ఆపడం"
  },
  {
    "question": "पकड़ना",
    "options": ["పట్టుకోవడం", "విసిరేయడం", "దాచడం", "వెతకడం"],
    "answer": "పట్టుకోవడం"
  },
  {
    "question": "फेंकना",
    "options": ["విసిరేయడం", "పట్టుకోవడం", "దాచడం", "ఉపయోగించడం"],
    "answer": "విసిరేయడం"
  },
  {
    "question": "छिपाना",
    "options": ["దాచడం", "వెతకడం", "పట్టుకోవడం", "ఆపడం"],
    "answer": "దాచడం"
  },
  {
    "question": "ढूंढना",
    "options": ["వెతకడం", "దాచడం", "పట్టుకోవడం", "ఉపయోగించడం"],
    "answer": "వెతకడం"
  },
  {
    "question": "उपयोग करना",
    "options": ["ఉపయోగించడం", "వెతకడం", "దాచడం", "ప్రారంభించడం"],
    "answer": "ఉపయోగించడం"
  },
  {
    "question": "जीतना",
    "options": ["గెలవడం", "ఓడిపోవడం", "ఆడటం", "సహాయం చేయడం"],
    "answer": "గెలవడం"
  },
  {
    "question": "हारना",
    "options": ["ఓడిపోవడం", "గెలవడం", "పరిగెత్తడం", "నడవడం"],
    "answer": "ఓడిపోవడం"
  },
  {
    "question": "తినడం",
    "options": ["खाना", "पीना", "सोना", "जाना"],
    "answer": "खाना"
  },
  {
    "question": "త్రాగడం",
    "options": ["पीना", "खाना", "बोलना", "पढ़ना"],
    "answer": "पीना"
  },
  {
    "question": "నిద్రపోవడం",
    "options": ["सोना", "जाना", "आना", "देखना"],
    "answer": "सोना"
  },
  {
    "question": "వెళ్ళడం",
    "options": ["जाना", "आना", "चलना", "दौड़ना"],
    "answer": "जाना"
  },
  {
    "question": "రావడం",
    "options": ["आना", "जाना", "बोलना", "पढ़ना"],
    "answer": "आना"
  },
  {
    "question": "మాట్లాడటం",
    "options": ["बोलना", "देखना", "सुनना", "चलना"],
    "answer": "बोलना"
  },
  {
    "question": "చదవడం",
    "options": ["पढ़ना", "लिखना", "देखना", "सुनना"],
    "answer": "पढ़ना"
  },
  {
    "question": "రాయడం",
    "options": ["लिखना", "पढ़ना", "गाना", "हँसना"],
    "answer": "लिखना"
  },
  {
    "question": "చూడటం",
    "options": ["देखना", "सुनना", "चलना", "बैठना"],
    "answer": "देखना"
  },
  {
    "question": "వినడం",
    "options": ["सुनना", "देखना", "बोलना", "हँसना"],
    "answer": "सुनना"
  },
  {
    "question": "నడవడం",
    "options": ["चलना", "दौड़ना", "बैठना", "जाना"],
    "answer": "चलना"
  },
  {
    "question": "పరిగెత్తడం",
    "options": ["दौड़ना", "चलना", "बैठना", "आना"],
    "answer": "दौड़ना"
  },
  {
    "question": "కూర్చోవడం",
    "options": ["बैठना", "चलना", "दौड़ना", "देखना"],
    "answer": "बैठना"
  },
  {
    "question": "కాపాడటం",
    "options": ["बचाना", "मदद करना", "देना", "लेना"],
    "answer": "बचाना"
  },
  {
    "question": "నేర్చుకోవడం",
    "options": ["सीखना", "खेलना", "मदद करना", "पढ़ना"],
    "answer": "सीखना"
  },
  {
    "question": "ఆడటం",
    "options": ["खेलना", "सीखना", "गाना", "हँसना"],
    "answer": "खेलना"
  },
  {
    "question": "సహాయం చేయడం",
    "options": ["मदद करना", "बचाना", "देना", "लेना"],
    "answer": "मदद करना"
  },
  {
    "question": "ఇవ్వడం",
    "options": ["देना", "लेना", "खरीदना", "बेचना"],
    "answer": "देना"
  },
  {
    "question": "తీసుకోవడం",
    "options": ["लेना", "देना", "खरीदना", "साफ करना"],
    "answer": "लेना"
  },
  {
    "question": "తెరవడం",
    "options": ["खोलना", "बंद करना", "खरीदना", "बेचना"],
    "answer": "खोलना"
  },
  {
    "question": "మూసివేయడం",
    "options": ["बंद करना", "खोलना", "साफ करना", "धोना"],
    "answer": "बंद करना"
  },
  {
    "question": "కొనడం",
    "options": ["खरीदना", "बेचना", "देना", "लेना"],
    "answer": "खरीदना"
  },
  {
    "question": "అమ్మడం",
    "options": ["बेचना", "खरीदना", "खोलना", "बंद करना"],
    "answer": "बेचना"
  },
  {
    "question": "శుభ్రం చేయడం",
    "options": ["साफ करना", "धोना", "गाना", "हँसना"],
    "answer": "साफ करना"
  },
  {
    "question": "కడగడం",
    "options": ["धोना", "साफ करना", "गाना", "रोना"],
    "answer": "धोना"
  },
  {
    "question": "పాడటం",
    "options": ["गाना", "हँसना", "रोना", "सोचना"],
    "answer": "गाना"
  },
  {
    "question": "ఏడవడం",
    "options": ["रोना", "हँसना", "गाना", "बोलना"],
    "answer": "रोना"
  },
  {
    "question": "నవ్వడం",
    "options": ["हँसना", "रोना", "गाना", "मुस्कुराना"],
    "answer": "हँसना"
  },
  {
    "question": "చిరునవ్వు నవ్వడం",
    "options": ["मुस्कुराना", "हँसना", "रोना", "गाना"],
    "answer": "मुस्कुराना"
  },
  {
    "question": "ఆలోచించడం",
    "options": ["सोचना", "भूलना", "शुरू करना", "रोकना"],
    "answer": "सोचना"
  },
  {
    "question": "మర్చిపోవడం",
    "options": ["भूलना", "सोचना", "शुरू करना", "ढूंढना"],
    "answer": "भूलना"
  },
  {
    "question": "ప్రారంభించడం",
    "options": ["शुरू करना", "रोकना", "पकड़ना", "फेंकना"],
    "answer": "शुरू करना"
  },
  {
    "question": "ఆపడం",
    "options": ["रोकना", "शुरू करना", "ढूंढना", "छिपाना"],
    "answer": "रोकना"
  },
  {
    "question": "పట్టుకోవడం",
    "options": ["पकड़ना", "फेंकना", "छिपाना", "ढूंढना"],
    "answer": "पकड़ना"
  },
  {
    "question": "విసిరేయడం",
    "options": ["फेंकना", "पकड़ना", "छिपाना", "उपयोग करना"],
    "answer": "फेंकना"
  },
  {
    "question": "దాచడం",
    "options": ["छिपाना", "ढूंढना", "पकड़ना", "रोकना"],
    "answer": "छिपाना"
  },
  {
    "question": "వెతకడం",
    "options": ["ढूंढना", "छिपाना", "पकड़ना", "उपयोग करना"],
    "answer": "ढूंढना"
  },
  {
    "question": "ఉపయోగించడం",
    "options": ["उपयोग करना", "ढूंढना", "छिपाना", "शुरू करना"],
    "answer": "उपयोग करना"
  },
  {
    "question": "గెలవడం",
    "options": ["जीतना", "हारना", "खेलना", "मदद करना"],
    "answer": "जीतना"
  },
  {
    "question": "ఓడిపోవడం",
    "options": ["हारना", "जीतना", "दौड़ना", "चलना"],
    "answer": "हारना"
  }
/* ...more questions retained as in your original list... */
];

/* --- UI refs --- */
const choiceSelect = document.getElementById('choiceSelect');
const countSelect = document.getElementById('countSelect');
const timeSelect = document.getElementById('timeSelect');
const choiceCustom = document.getElementById('choiceCustom');
const countCustom = document.getElementById('countCustom');
const timeCustom = document.getElementById('timeCustom');
const timerEnable = document.getElementById('timerEnable');
const startBtn = document.getElementById('startBtn');
const quizDiv = document.getElementById('quiz');
const progressBar = document.getElementById('progress');
const counterEl = document.getElementById('counter');
const timerEl = document.getElementById('timer');
const activityTimerEl = document.getElementById('activityTimer');

const mistakeEnable = document.getElementById('mistakeEnable');
const mistakeSelect = document.getElementById('mistakeSelect');
const mistakeCustom = document.getElementById('mistakeCustom');
const mistakesLeftEl = document.getElementById('mistakesLeft');

const SETTINGS_KEY = 'samas_custom_settings_with_timer_v2';

/* --- defaults --- */
const defaults = {
  choices: 4,
  count: Math.min(24, questions.length),
  time: 180,
  timerEnabled: true,
  mistakesEnabled: false,
  mistakesAllowed: 0
};

/* --- populate selects --- */
[3,4,5,6,'Custom'].forEach(v => { const o=document.createElement('option'); o.value=v; o.textContent=v; choiceSelect.appendChild(o); });
[10,24,50,75,'All','Custom'].forEach(v => { const o=document.createElement('option'); o.value=v; o.textContent=v; countSelect.appendChild(o); });
[0,60,120,180,300,600,'Custom'].forEach(v => { const o=document.createElement('option'); o.value=v; o.textContent=v; timeSelect.appendChild(o); });
[0,1,2,3,5,10,'Custom'].forEach(v => { const o=document.createElement('option'); o.value=v; o.textContent=v; mistakeSelect.appendChild(o); });

/* --- load settings or use defaults --- */
let saved = localStorage.getItem(SETTINGS_KEY);
let settings = saved ? JSON.parse(saved) : defaults;

/* --- apply saved settings to UI --- */
function applySettingsToUI(){
  if ([3,4,5,6].includes(settings.choices)) { choiceSelect.value = settings.choices; choiceCustom.style.display='none'; }
  else { choiceSelect.value='Custom'; choiceCustom.style.display=''; choiceCustom.value = settings.choices; }

  if ([10,24,50,75].includes(settings.count)) { countSelect.value = settings.count; countCustom.style.display='none'; }
  else if (settings.count === questions.length) { countSelect.value = 'All'; countCustom.style.display='none'; }
  else { countSelect.value='Custom'; countCustom.style.display=''; countCustom.value = settings.count; }

  if ([0,60,120,180,300,600].includes(settings.time)) { timeSelect.value = settings.time; timeCustom.style.display='none'; }
  else { timeSelect.value='Custom'; timeCustom.style.display=''; timeCustom.value = settings.time; }

  timerEnable.checked = !!settings.timerEnabled;

  mistakeEnable.checked = !!settings.mistakesEnabled;
  if ([0,1,2,3,5,10].includes(settings.mistakesAllowed)) { mistakeSelect.value = settings.mistakesAllowed; mistakeCustom.style.display='none'; }
  else { mistakeSelect.value='Custom'; mistakeCustom.style.display=''; mistakeCustom.value = settings.mistakesAllowed; }
}
applySettingsToUI();

/* --- events --- */
let selectsDirty = false;
choiceSelect.addEventListener('change', ()=>{ selectsDirty = true; choiceSelect.value==='Custom'?choiceCustom.style.display='':choiceCustom.style.display='none'; });
countSelect.addEventListener('change', ()=>{ selectsDirty = true; countSelect.value==='Custom'?countCustom.style.display='':countCustom.style.display='none'; });
timeSelect.addEventListener('change', ()=>{ selectsDirty = true; timeSelect.value==='Custom'?timeCustom.style.display='':timeCustom.style.display='none'; });
timerEnable.addEventListener('change', ()=>{ selectsDirty = true; });
mistakeSelect.addEventListener('change', ()=>{ selectsDirty = true; mistakeSelect.value==='Custom'?mistakeCustom.style.display='':mistakeCustom.style.display='none'; });
mistakeEnable.addEventListener('change', ()=>{ selectsDirty = true; });

/* --- helpers --- */
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
function sampleOptions(baseOptions, correct, n){ const pool=baseOptions.filter(x=>x!==correct); shuffle(pool); const chosen=pool.slice(0,n-1); chosen.push(correct); return shuffle(chosen); }
function formatTime(s){ const m=Math.floor(s/60); const r=s%60; return `${String(m).padStart(2,'0')}:${String(r).padStart(2,'0')}`; }

/* --- quiz state --- */
let currentSet=[], idx=0, userAnswers=[], timerInterval=null;
let quizEnded=false, mistakesCount=0;
let activityInterval=null, activityStart=null;

/* --- read UI values --- */
function readUIValues(){
  let choicesVal = (choiceSelect.value==='Custom') ? parseInt(choiceCustom.value,10)||defaults.choices : parseInt(choiceSelect.value,10);
  let countVal;
  if (countSelect.value==='Custom') countVal=parseInt(countCustom.value,10)||Math.min(24,questions.length);
  else if (countSelect.value==='All') countVal=questions.length;
  else countVal=parseInt(countSelect.value,10);
  let timeVal=(timeSelect.value==='Custom')?parseInt(timeCustom.value,10)||0:parseInt(timeSelect.value,10);
  let mistakesAllowedVal = (mistakeSelect.value==='Custom') ? parseInt(mistakeCustom.value,10)||0 : parseInt(mistakeSelect.value,10);
  return {
    choices:Math.max(2,choicesVal),
    count:Math.min(Math.max(1,countVal),questions.length),
    time:Math.max(0,timeVal),
    mistakesEnabled: !!mistakeEnable.checked,
    mistakesAllowed: Math.max(0, isNaN(mistakesAllowedVal) ? 0 : mistakesAllowedVal )
  };
}

/* --- activity timer: start/stop (reset on start) --- */
function startActivityTimer(){
  if (activityInterval) { clearInterval(activityInterval); activityInterval=null; }
  activityStart = Date.now();
  activityTimerEl.textContent = formatTime(0);
  activityInterval = setInterval(()=>{
    const secs = Math.floor((Date.now() - activityStart)/1000);
    activityTimerEl.textContent = formatTime(secs);
  },1000);
}
function stopActivityTimer(){
  // Stop the ticking interval but keep activityStart so final elapsed time can be shown.
  if (activityInterval) clearInterval(activityInterval);
  activityInterval = null;
  // DO NOT reset activityStart here — keep its value so showResults() can compute elapsed time.
  // Do not reset the displayed text either; keep the last visible elapsed time.
}

/* --- countdown timer --- */
function startTimer(sec){
  if (timerInterval) clearInterval(timerInterval);
  if (!sec || sec <= 0){ timerEl.textContent='--:--'; return; }
  let remaining = sec;
  timerEl.textContent = formatTime(remaining);
  timerInterval = setInterval(()=>{
    remaining--;
    if (remaining <= 0){ clearInterval(timerInterval); timerEl.textContent='00:00'; quizEnded=true; stopActivityTimer(); showResults(); }
    else timerEl.textContent = formatTime(remaining);
  },1000);
}

/* --- start quiz --- */
function startQuiz(){
  const vals = readUIValues();
  settings = {
    choices: vals.choices,
    count: vals.count,
    time: vals.time,
    timerEnabled: !!timerEnable.checked,
    mistakesEnabled: vals.mistakesEnabled,
    mistakesAllowed: vals.mistakesAllowed
  };
  localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings));
  selectsDirty = false;

  // Prepare and sample questions
  const pool = JSON.parse(JSON.stringify(questions));
  shuffle(pool);
  currentSet = pool.slice(0, Math.min(settings.count, pool.length)).map(q => ({
    question: q.question,
    options: sampleOptions(q.options, q.answer, Math.min(settings.choices, q.options.length)),
    answer: q.answer
  }));

  // reset state
  idx = 0; userAnswers = new Array(currentSet.length).fill(null);
  quizEnded = false; mistakesCount = 0;
  updateMistakesDisplay();

  // reset & start activity timer only once here
  stopActivityTimer();
  startActivityTimer();

  // start countdown if enabled
  if (settings.timerEnabled && settings.time > 0) startTimer(settings.time); else startTimer(0);

  renderQuestion();
}

/* --- update mistakes UI --- */
function updateMistakesDisplay(){
  if (settings && settings.mistakesEnabled){
    mistakesLeftEl.style.display = '';
    const left = Math.max(0, settings.mistakesAllowed - mistakesCount);
    mistakesLeftEl.textContent = `Mistakes left: ${left} (allowed ${settings.mistakesAllowed})`;
  } else {
    mistakesLeftEl.style.display = 'none';
  }
}

/* --- render question --- */
function renderQuestion(){
  if (!currentSet.length){ quizDiv.innerHTML = '<div style="padding:18px;color:#bfe">Press Start to begin</div>'; return; }
  const q = currentSet[idx];
  quizDiv.innerHTML = '';
  const qText = document.createElement('div'); qText.className='question'; qText.textContent = `${idx+1}. ${q.question}`; quizDiv.appendChild(qText);
  const optsWrap = document.createElement('div'); optsWrap.className='options';

  q.options.forEach(opt => {
    const btn = document.createElement('button');
    btn.className = 'answer-btn';
    btn.type = 'button';
    btn.dataset.value = opt;
    btn.textContent = opt;
    // On click: evaluate answer but DO NOT restart activity timer
    btn.addEventListener('click', () => handleAnswer(q, opt, btn));
    optsWrap.appendChild(btn);
  });

  quizDiv.appendChild(optsWrap);
  updateProgress();
}

/* --- handle answer --- */
function handleAnswer(qObj, chosen, chosenBtn){
  // Do not restart activity timer here — only start it at quiz start.
  const buttons = Array.from(quizDiv.querySelectorAll('.answer-btn'));
  buttons.forEach(b => b.disabled = true);
  buttons.forEach(b => {
    if (b.dataset.value === qObj.answer) b.classList.add('correct');
    if (b.dataset.value === chosen && chosen !== qObj.answer) b.classList.add('incorrect');
  });

  userAnswers[idx] = chosen;

  if (chosen !== qObj.answer){
    mistakesCount++;
    updateMistakesDisplay();
    if (settings.mistakesEnabled && mistakesCount > settings.mistakesAllowed){
      quizEnded = true;
      stopActivityTimer();
      setTimeout(()=> showResults(), 420);
      return;
    }
  }

  setTimeout(()=>{
    if (quizEnded) return;
    if (idx < currentSet.length - 1){ idx++; renderQuestion(); }
    else { stopActivityTimer(); showResults(); }
  }, 450);
}

/* --- progress --- */
function updateProgress(){
  const pct = currentSet.length>1 ? Math.round(((idx)/(Math.max(1,currentSet.length-1))) * 100) : 0;
  progressBar.style.width = `${pct}%`;
  counterEl.textContent = `Question ${idx+1} of ${currentSet.length}`;
}

/* --- results --- */
function showResults(){
  quizEnded = true;
  if (timerInterval) clearInterval(timerInterval);
  stopActivityTimer();

  quizDiv.innerHTML = '';
  const out = document.createElement('div'); out.style.padding='12px';
  out.innerHTML = '<h3 style="color:#fff;margin-top:0">Results</h3>';
  let correct = 0;
  currentSet.forEach((q,i)=>{
    const ua = userAnswers[i];
    const ok = ua === q.answer;
    if (ok) correct++;
    const row = document.createElement('div'); row.style.marginBottom='10px';
    row.innerHTML = `<strong style="color:#fff">${i+1}. ${q.question}</strong><div style="margin-top:6px;color:${ok?'#ffd700':'#ff9aa2'}">Your: ${ua?ua:'—'}</div>${ok?'':`<div style="color:#ffd700">Ans: ${q.answer}</div>`}`;
    out.appendChild(row);
  });
  out.innerHTML += `<div style="margin-top:12px;color:#dff"><strong>Score: ${correct} / ${currentSet.length}</strong></div>`;
  if (settings && settings.mistakesEnabled){
    out.innerHTML += `<div style="margin-top:8px;color:#ffb3b3"><strong>Mistakes made: ${mistakesCount} (allowed ${settings.mistakesAllowed})</strong></div>`;
  }
  if (activityStart){ const elapsedSecs = Math.floor((Date.now() - activityStart)/1000); out.innerHTML += `<div style="margin-top:8px;color:#ffb3b3"><strong>Elapsed time: ${formatTime(elapsedSecs)}</strong></div>`; }

  const retakeBtn = document.createElement('button'); retakeBtn.textContent = 'Retake Quiz'; retakeBtn.className='small-btn'; retakeBtn.style.marginTop='12px';
  retakeBtn.addEventListener('click', startQuiz);
  out.appendChild(retakeBtn);

  quizDiv.appendChild(out);
  progressBar.style.width='100%';
  counterEl.textContent = `Done — Score ${correct}/${currentSet.length}`;
}

/* --- auto-start on load --- */
window.addEventListener('load', ()=>{ applySettingsToUI(); setTimeout(()=>{ if(!selectsDirty) startQuiz(); }, 120); });
startBtn.addEventListener('click', startQuiz);

/* --- themes (restored full set) --- */
const THEMES = {
  "Neon Night": { "--bg1":"#291c6e","--bg2":"#00167d","--panel":"#12132a","--accent":"#2debb0" },
  "Sunset Glow": { "--bg1":"#ff7e5f","--bg2":"#feb47b","--panel":"#2e1d12","--accent":"#ffd166" },
  "Ocean Blue": { "--bg1":"#006994","--bg2":"#003459","--panel":"#012a36","--accent":"#00e5ff" },
  "Forest Green": { "--bg1":"#1b4332","--bg2":"#081c15","--panel":"#0f5132","--accent":"#95d5b2" },
  "Royal Purple": { "--bg1":"#3c096c","--bg2":"#240046","--panel":"#10002b","--accent":"#9d4edd" },
  "Golden Desert": { "--bg1":"#d97706","--bg2":"#92400e","--panel":"#78350f","--accent":"#fcd34d" },
  "Candy Pink": { "--bg1":"#ff80ab","--bg2":"#ec407a","--panel":"#880e4f","--accent":"#f8bbd0" },
  "Sky Cyan": { "--bg1":"#00c6ff","--bg2":"#0072ff","--panel":"#012a4a","--accent":"#90e0ef" },
  "Elegant Gray": { "--bg1":"#2c2c2c","--bg2":"#1a1a1a","--panel":"#111111","--accent":"#bfbfbf" }
};

/* --- theme select population & apply (patched) --- */
const themeSelect = document.getElementById('themeSelect');
const THEME_KEY = "quiz_theme_choice";
// populate the dropdown if the element exists
if (themeSelect) {
  Object.keys(THEMES).forEach(name => {
    const opt = document.createElement('option');
    opt.value = name;
    opt.textContent = name;
    themeSelect.appendChild(opt);
  });

  // load saved theme or default
  let savedTheme = localStorage.getItem(THEME_KEY) || "Neon Night";
  if (!THEMES[savedTheme]) savedTheme = "Neon Night";
  themeSelect.value = savedTheme;

  function applyTheme(name){
    const theme = THEMES[name] || THEMES["Neon Night"];
    Object.keys(theme).forEach(key => {
      document.documentElement.style.setProperty(key, theme[key]);
    });
    document.body.style.background = `radial-gradient(circle at 10% 10%, #06104a 0%, var(--bg1) 25%, var(--bg2) 70%)`;
    localStorage.setItem(THEME_KEY, name);
  }

  // apply initial theme and hook change event
  applyTheme(savedTheme);
  themeSelect.addEventListener('change', ()=>{ applyTheme(themeSelect.value); });
}

</script>
</body>
</html>

  













    
